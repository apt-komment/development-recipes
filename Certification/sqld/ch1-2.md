# PART 1. 데이터 모델링의 이해

## Ch01. 데이터 모델과 SQL

## I. 정규화

> ### 정규화란?

- 데이터 정합성(데이터의 정확성과 일관성을 유지하고 보장)을 위해 엔티티를 작은 단위로 분리하는 과정
- 조회 성능은 조건에 따라 향상 또는 저하
- CUD 성능은 일반적으로 향상

> ### 제1정규화

- 모든 속성은 반드시 하나의 값만 가져야 한다.
- 불필요한 Split 함수를 사용하지 않아도 됨
- 조회 시 번거로움이 덜어짐

**→ 정규화 전**

|  이름  |       직업       |
| :----: | :--------------: |
| 홍길동 | 배우,가수,작곡가 |

**→ 정규화 후**

|  이름  |  직업  |
| :----: | :----: |
| 홍길동 |  배우  |
| 홍길동 |  가수  |
| 홍길동 | 작곡가 |

> ### 제2정규화

- 엔티티의 모든 일반속성은 반드시 모든 주식별자에 종속돼야 한다.
- 주식별자가 복합식별자 일 경우에도 모든 주식별자에 종속돼야 함 (부분종속 허용 X)

**→ 정규화 전**

(주문번호와 음료코드는 주식별자)

| 주문번호 | 음료코드 | 주문수량 |   음료명   |
| :------: | :------: | :------: | :--------: |
|    1     |    A1    |    2     | 아메리카노 |
|    2     |    B1    |    1     |  카페라떼  |
|    3     |    A1    |    1     | 아메리카노 |

- 주문되지 않은 음료는 입력 할 수 없음
- 음료명이 변경될 경우 해당 음료와 관련된 데이터를 모두 수정해야 함

**→ 정규화 후**

| 주문번호 | 음료코드 | 주문수량 |
| :------: | :------: | :------: |
|    1     |    A1    |    2     |
|    2     |    B1    |    1     |
|    3     |    A1    |    1     |

| 음료코드 |   음료명   |
| :------: | :--------: |
|    A1    | 아메리카노 |
|    B1    |  카페라떼  |

> ### 제3정규화

- 주식별자가 아닌 모든 속성 간에는 서로 종속될 수 없다.

**→ 정규화 전**
| 일련번호 | 이름 | 생년월일 | 소속사코드 | 소속사명 |
| :------: | :----: | :------: | :--------: | :------: |
| 1 | 홍길동 | 19930516 | 001 | A |
| 2 | 청길동 | 19131201 | 002 | B |
| 3 | 녹길동 | 20030827 | 001 | A |

- 일반속성인 소속사명이 일반속성인 소속사코드에 종속

**→ 정규화 전**
| 일련번호 | 이름 | 생년월일 | 소속사코드 |
| :------: | :----: | :------: | :--------: |
| 1 | 홍길동 | 19930516 | 001 |
| 2 | 청길동 | 19131201 | 002 |
| 3 | 녹길동 | 20030827 | 001 |

| 소속사코드 | 소속사명 |
| :--------: | :------: |
|    001     |    A     |
|    002     |    B     |

> ### 주의사항

- 지나친 JOIN으로 인해 성능이 크게 저하되지 않도록 주의
- 관계 생성을 통해 성능 개선도 하나의 방법

## II. 반정규화

> ### 반정규화란?

- 데이터의 조회 성능을 향상시키기 위해 데이터의 중복을 허용하거나 데이터를 그룹핑하는 과정
- 데이터 무결성이 저해됨
- 조회 성능은 향상될 수 있으나 CUD 성능은 저하될 수 있음
- 정규화를 마친 후 조회 성능 이슈가 있을 시 진행 고려

> ### 종류

- 테이블 병합
  - 1:1 관계 테이블 병합
  - 1:N 관계 테이블 병합
  - 슈퍼 서브 타입 테이블 병합
- 테이블 분할
  - 테이블 수직 분할 (속성 분할)
  - 테이블 수평 분할 (인스턴스 분할, 파티셔닝)
- 테이블 추가

  - 중복 테이블 추가
  - 통계 테이블 추가
  - 이력 테이블 추가
  - 부분 테이블 추가

<br>
- 중복 컬럼 추가
  - 업무 프로세스상 JOIN이 많이 필요한 경우 컬럼 추가
- 파생 컬럼 추가
  - 프로세스 수행 시 부하가 염려되는 계산값을 미리 컬럼으로 추가
- 이력 테이블 컬럼 추가
  - 대량의 이력 테이블을 조회할 때 속도가 느려질 것을 대비하여 조회 기준이 될 것으로 판단되는 컬럼을 미리 추가

<br>
- 관계 반정규화 (중복 관계 추가)

## III. 트랜잭션

> ### 트랜잭션이란?

- 데이터를 조작하기 위한 하나의 논리적인 작업 단위
- 모두 성공(COMMIT)되거나 모두 실패(ROLLBACK)됨

## IV. NULL

- 값 없음
